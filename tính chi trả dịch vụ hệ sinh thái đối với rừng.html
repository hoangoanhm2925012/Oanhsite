<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√≠nh ph√≠ chi tr·∫£ d·ªãch v·ª• h·ªá sinh th√°i r·ª´ng - Khu du l·ªãch</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a5a2e 0%, #2d8a4e 50%, #45a965 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .legal-reference {
            background: rgba(255,255,255,0.15);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            backdrop-filter: blur(10px);
        }

        .legal-reference h3 {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .legal-reference ul {
            font-size: 12px;
            margin-left: 20px;
            line-height: 1.8;
        }

        .main-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .card-header {
            background: linear-gradient(135deg, #0d7a3e 0%, #15a050 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .card-header h2 {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .card-header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .form-container {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8fdf9;
            border-radius: 15px;
            border-left: 4px solid #2d8a4e;
        }

        .section-title {
            font-size: 16px;
            color: #1a5a2e;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title .icon {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #2d8a4e, #45a965);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: 13px;
            color: #555;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #2d8a4e;
            box-shadow: 0 0 0 3px rgba(45, 138, 78, 0.1);
        }

        .form-group input::placeholder {
            color: #aaa;
        }

        .unit {
            font-size: 11px;
            color: #888;
            margin-top: 5px;
        }

        .info-box {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #4caf50;
        }

        .info-box h4 {
            color: #2e7d32;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .info-box p {
            color: #555;
            font-size: 13px;
            line-height: 1.6;
        }

        .btn-calculate {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #1a5a2e 0%, #2d8a4e 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(26, 90, 46, 0.4);
        }

        .btn-calculate:active {
            transform: translateY(0);
        }

        .result-container {
            display: none;
            margin-top: 30px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-card {
            background: linear-gradient(135deg, #1a5a2e 0%, #2d8a4e 100%);
            border-radius: 15px;
            padding: 25px;
            color: white;
        }

        .result-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .result-header h3 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .result-item {
            background: rgba(255,255,255,0.15);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .result-item .label {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .result-item .value {
            font-size: 18px;
            font-weight: bold;
        }

        .total-fee {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .total-fee .label {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .total-fee .amount {
            color: #1a5a2e;
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .total-fee .note {
            color: #888;
            font-size: 12px;
        }

        .breakdown {
            margin-top: 25px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
        }

        .breakdown h4 {
            margin-bottom: 15px;
            font-size: 14px;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 13px;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn-secondary {
            flex: 1;
            padding: 12px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            padding: 20px;
            font-size: 12px;
            opacity: 0.8;
        }

        .footer a {
            color: #a5d6a7;
            text-decoration: none;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 11px;
            line-height: 1.5;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .rate-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rate-input input {
            flex: 1;
        }

        .rate-input span {
            font-weight: bold;
            color: #2d8a4e;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 22px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .result-grid {
                grid-template-columns: 1fr 1fr;
            }

            .btn-group {
                flex-direction: column;
            }

            .total-fee .amount {
                font-size: 28px;
            }
        }

        .warning-box {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-left: 4px solid #ff9800;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: #e65100;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .warning-box p {
            color: #555;
            font-size: 13px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå≤ C√îNG C·ª§ T√çNH PH√ç CHI TR·∫¢ D·ªäCH V·ª§ H·ªÜ SINH TH√ÅI R·ª™NG</h1>
            <p class="subtitle">D√†nh cho c√°c c∆° s·ªü kinh doanh d·ªãch v·ª• du l·ªãch sinh th√°i t·∫°i Vi·ªát Nam</p>
            
            <div class="legal-reference">
                <h3>üìã CƒÉn c·ª© ph√°p l√Ω:</h3>
                <ul>
                    <li><strong>Ngh·ªã ƒë·ªãnh 99/2010/Nƒê-CP</strong> - Ch√≠nh s√°ch chi tr·∫£ d·ªãch v·ª• m√¥i tr∆∞·ªùng r·ª´ng</li>
                    <li><strong>Ngh·ªã ƒë·ªãnh 156/2018/Nƒê-CP</strong> - Quy ƒë·ªãnh chi ti·∫øt thi h√†nh Lu·∫≠t L√¢m nghi·ªáp</li>
                    <li><strong>M·ª©c thu t·ªëi thi·ªÉu:</strong> 1% t·ªïng doanh thu th·ª±c hi·ªán trong k·ª≥</li>
                </ul>
            </div>
        </div>

        <div class="main-card">
            <div class="card-header">
                <h2>üìä NH·∫¨P TH√îNG TIN DOANH THU QU√ù</h2>
                <p>Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin doanh thu t·ª´ ho·∫°t ƒë·ªông du l·ªãch</p>
            </div>

            <div class="form-container">
                <!-- Th√¥ng tin c∆° s·ªü -->
                <div class="section">
                    <div class="section-title">
                        <span class="icon">üè¢</span>
                        <span>TH√îNG TIN C∆† S·ªû KINH DOANH</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>T√™n c∆° s·ªü kinh doanh du l·ªãch</label>
                            <input type="text" id="businessName" placeholder="Nh·∫≠p t√™n khu du l·ªãch...">
                        </div>
                        <div class="form-group">
                            <label>K·ª≥ b√°o c√°o</label>
                            <select id="quarter">
                                <option value="Q1">Qu√Ω I (Th√°ng 1-3)</option>
                                <option value="Q2">Qu√Ω II (Th√°ng 4-6)</option>
                                <option value="Q3">Qu√Ω III (Th√°ng 7-9)</option>
                                <option value="Q4">Qu√Ω IV (Th√°ng 10-12)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>NƒÉm</label>
                            <select id="year">
                                <option value="2024">2024</option>
                                <option value="2025" selected>2025</option>
                                <option value="2026">2026</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Th√¥ng tin l∆∞·ª£t kh√°ch -->
                <div class="section">
                    <div class="section-title">
                        <span class="icon">üë•</span>
                        <span>TH√îNG TIN L∆Ø·ª¢T KH√ÅCH DU L·ªäCH</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>T·ªïng s·ªë l∆∞·ª£t kh√°ch trong qu√Ω</label>
                            <input type="number" id="totalVisitors" placeholder="0" min="0">
                            <span class="unit">l∆∞·ª£t kh√°ch</span>
                        </div>
                        <div class="form-group">
                            <label>S·ªë ng√†y l∆∞u tr√∫ trung b√¨nh/kh√°ch</label>
                            <input type="number" id="avgStayDays" placeholder="0" min="0" step="0.5">
                            <span class="unit">ng√†y/kh√°ch</span>
                        </div>
                        <div class="form-group">
                            <label>T·ªïng s·ªë ng√†y-kh√°ch (t·ª± ƒë·ªông t√≠nh)</label>
                            <input type="number" id="totalGuestDays" placeholder="0" readonly style="background: #f5f5f5;">
                            <span class="unit">ng√†y-kh√°ch</span>
                        </div>
                    </div>
                </div>

                <!-- Doanh thu chi ti·∫øt -->
                <div class="section">
                    <div class="section-title">
                        <span class="icon">üí∞</span>
                        <span>DOANH THU THEO T·ª™NG H·∫†NG M·ª§C</span>
                    </div>

                    <div class="info-box">
                        <h4>‚ÑπÔ∏è H∆∞·ªõng d·∫´n nh·∫≠p li·ªáu</h4>
                        <p>Nh·∫≠p doanh thu th·ª±c t·∫ø ph√°t sinh trong qu√Ω b√°o c√°o. ƒê∆°n v·ªã t√≠nh: VNƒê. C√°c kho·∫£n doanh thu ph·∫£i c√≥ h√≥a ƒë∆°n, ch·ª©ng t·ª´ h·ª£p l·ªá theo quy ƒë·ªãnh.</p>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="tooltip">
                                üè® Doanh thu d·ªãch v·ª• l∆∞u tr√∫ (ph√≤ng ng·ªß)
                                <span class="tooltiptext">Bao g·ªìm: ti·ªÅn ph√≤ng kh√°ch s·∫°n, nh√† ngh·ªâ, homestay, l·ªÅu tr·∫°i... trong khu du l·ªãch</span>
                            </label>
                            <input type="number" id="revenueAccommodation" placeholder="0" min="0">
                            <span class="unit">VNƒê</span>
                        </div>
                        <div class="form-group">
                            <label class="tooltip">
                                üöó Doanh thu d·ªãch v·ª• ƒëi l·∫°i/v·∫≠n chuy·ªÉn
                                <span class="tooltiptext">Bao g·ªìm: xe ƒëi·ªán, thuy·ªÅn, c√°p treo, xe ƒë·∫°p, xe m√°y cho thu√™... trong khu du l·ªãch</span>
                            </label>
                            <input type="number" id="revenueTransport" placeholder="0" min="0">
                            <span class="unit">VNƒê</span>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="tooltip">
                                üçΩÔ∏è Doanh thu d·ªãch v·ª• ƒÉn u·ªëng
                                <span class="tooltiptext">Bao g·ªìm: nh√† h√†ng, qu√°n ƒÉn, qu·∫ßy bar, cafe... trong khu du l·ªãch</span>
                            </label>
                            <input type="number" id="revenueFoodBeverage" placeholder="0" min="0">
                            <span class="unit">VNƒê</span>
                        </div>
                        <div class="form-group">
                            <label class="tooltip">
                                üõçÔ∏è Doanh thu b√°n h√†ng/mua s·∫Øm
                                <span class="tooltiptext">Bao g·ªìm: ƒë·ªì l∆∞u ni·ªám, ƒë·∫∑c s·∫£n, h√†ng th·ªß c√¥ng m·ªπ ngh·ªá... trong khu du l·ªãch</span>
                            </label>
                            <input type="number" id="revenueShopping" placeholder="0" min="0">
                            <span class="unit">VNƒê</span>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="tooltip">
                                üé´ Doanh thu v√© tham quan
                                <span class="tooltiptext">Ti·ªÅn v√© v√†o c·ªïng, v√© tham quan c√°c ƒëi·ªÉm trong khu du l·ªãch</span>
                            </label>
                            <input type="number" id="revenueTicket" placeholder="0" min="0">
                            <span class="unit">VNƒê</span>
                        </div>
                        <div class="form-group">
                            <label class="tooltip">
                                üéØ Doanh thu d·ªãch v·ª• gi·∫£i tr√≠ kh√°c
                                <span class="tooltiptext">Bao g·ªìm: h∆∞·ªõng d·∫´n vi√™n, t·ªï ch·ª©c s·ª± ki·ªán, tr√≤ ch∆°i, spa... trong khu du l·ªãch</span>
                            </label>
                            <input type="number" id="revenueOther" placeholder="0" min="0">
                            <span class="unit">VNƒê</span>
                        </div>
                    </div>
                </div>

                <!-- T·ª∑ l·ªá chi tr·∫£ -->
                <div class="section">
                    <div class="section-title">
                        <span class="icon">üìê</span>
                        <span>T·ª∂ L·ªÜ CHI TR·∫¢ D·ªäCH V·ª§ H·ªÜ SINH TH√ÅI</span>
                    </div>

                    <div class="warning-box">
                        <h4>‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</h4>
                        <p>Theo Ngh·ªã ƒë·ªãnh 156/2018/Nƒê-CP, m·ª©c chi tr·∫£ <strong>t·ªëi thi·ªÉu l√† 1%</strong> t·ªïng doanh thu. T√πy theo th·ªèa thu·∫≠n v·ªõi ch·ªß r·ª´ng v√† Qu·ªπ B·∫£o v·ªá v√† Ph√°t tri·ªÉn r·ª´ng, t·ª∑ l·ªá c√≥ th·ªÉ cao h∆°n.</p>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>T·ª∑ l·ªá chi tr·∫£ DVHST √°p d·ª•ng</label>
                            <div class="rate-input">
                                <input type="number" id="feeRate" value="1" min="1" max="100" step="0.1">
                                <span>%</span>
                            </div>
                            <span class="unit">T·ªëi thi·ªÉu 1% theo quy ƒë·ªãnh</span>
                        </div>
                    </div>
                </div>

                <button class="btn-calculate" onclick="calculateFee()">
                    üßÆ T√çNH PH√ç CHI TR·∫¢ D·ªäCH V·ª§ H·ªÜ SINH TH√ÅI
                </button>

                <!-- K·∫øt qu·∫£ -->
                <div class="result-container" id="resultContainer">
                    <div class="result-card">
                        <div class="result-header">
                            <h3>üìã K·∫æT QU·∫¢ T√çNH TO√ÅN</h3>
                            <p id="resultPeriod"></p>
                        </div>

                        <div class="result-grid">
                            <div class="result-item">
                                <div class="label">T·ªïng l∆∞·ª£t kh√°ch</div>
                                <div class="value" id="resultVisitors">0</div>
                            </div>
                            <div class="result-item">
                                <div class="label">T·ªïng ng√†y-kh√°ch</div>
                                <div class="value" id="resultGuestDays">0</div>
                            </div>
                            <div class="result-item">
                                <div class="label">T·ªïng doanh thu</div>
                                <div class="value" id="resultTotalRevenue">0 ƒë</div>
                            </div>
                            <div class="result-item">
                                <div class="label">T·ª∑ l·ªá √°p d·ª•ng</div>
                                <div class="value" id="resultRate">1%</div>
                            </div>
                        </div>

                        <div class="total-fee">
                            <div class="label">PH√ç CHI TR·∫¢ D·ªäCH V·ª§ H·ªÜ SINH TH√ÅI PH·∫¢I N·ªòP</div>
                            <div class="amount" id="resultFee">0 VNƒê</div>
                            <div class="note">Theo Ngh·ªã ƒë·ªãnh 99/2010/Nƒê-CP v√† 156/2018/Nƒê-CP</div>
                        </div>

                        <div class="breakdown">
                            <h4>üìä Chi ti·∫øt doanh thu theo h·∫°ng m·ª•c:</h4>
                            <div class="breakdown-item">
                                <span>üè® D·ªãch v·ª• l∆∞u tr√∫</span>
                                <span id="breakAccommodation">0 ƒë</span>
                            </div>
                            <div class="breakdown-item">
                                <span>üöó D·ªãch v·ª• ƒëi l·∫°i</span>
                                <span id="breakTransport">0 ƒë</span>
                            </div>
                            <div class="breakdown-item">
                                <span>üçΩÔ∏è D·ªãch v·ª• ƒÉn u·ªëng</span>
                                <span id="breakFood">0 ƒë</span>
                            </div>
                            <div class="breakdown-item">
                                <span>üõçÔ∏è B√°n h√†ng/mua s·∫Øm</span>
                                <span id="breakShopping">0 ƒë</span>
                            </div>
                            <div class="breakdown-item">
                                <span>üé´ V√© tham quan</span>
                                <span id="breakTicket">0 ƒë</span>
                            </div>
                            <div class="breakdown-item">
                                <span>üéØ D·ªãch v·ª• kh√°c</span>
                                <span id="breakOther">0 ƒë</span>
                            </div>
                        </div>

                        <div class="btn-group">
                            <button class="btn-secondary" onclick="printResult()">üñ®Ô∏è In k·∫øt qu·∫£</button>
                            <button class="btn-secondary" onclick="exportPDF()">üìÑ Xu·∫•t PDF</button>
                            <button class="btn-secondary" onclick="resetForm()">üîÑ T√≠nh l·∫°i</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>C√¥ng c·ª• ƒë∆∞·ª£c ph√°t tri·ªÉn d·ª±a tr√™n quy ƒë·ªãnh t·∫°i Ngh·ªã ƒë·ªãnh 99/2010/Nƒê-CP v√† Ngh·ªã ƒë·ªãnh 156/2018/Nƒê-CP</p>
            <p>M·ªçi th·∫Øc m·∫Øc xin li√™n h·ªá: Qu·ªπ B·∫£o v·ªá v√† Ph√°t tri·ªÉn r·ª´ng t·ªânh/th√†nh ph·ªë n∆°i ƒë·∫∑t khu du l·ªãch</p>
            <p style="margin-top: 10px;">¬© 2025 - C√¥ng c·ª• h·ªó tr·ª£ t√≠nh ph√≠ DVHST r·ª´ng</p>
        </div>
    </div>

    <script>
        // T·ª± ƒë·ªông t√≠nh t·ªïng ng√†y-kh√°ch
        document.getElementById('totalVisitors').addEventListener('input', calculateGuestDays);
        document.getElementById('avgStayDays').addEventListener('input', calculateGuestDays);

        function calculateGuestDays() {
            const visitors = parseFloat(document.getElementById('totalVisitors').value) || 0;
            const days = parseFloat(document.getElementById('avgStayDays').value) || 0;
            document.getElementById('totalGuestDays').value = Math.round(visitors * days);
        }

        // ƒê·ªãnh d·∫°ng s·ªë ti·ªÅn
        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND',
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('vi-VN').format(num);
        }

        // T√≠nh ph√≠ chi tr·∫£ DVHST
        function calculateFee() {
            // L·∫•y th√¥ng tin c∆° b·∫£n
            const businessName = document.getElementById('businessName').value || 'Khu du l·ªãch';
            const quarter = document.getElementById('quarter').value;
            const year = document.getElementById('year').value;
            
            // L·∫•y th√¥ng tin l∆∞·ª£t kh√°ch
            const totalVisitors = parseFloat(document.getElementById('totalVisitors').value) || 0;
            const avgStayDays = parseFloat(document.getElementById('avgStayDays').value) || 0;
            const totalGuestDays = totalVisitors * avgStayDays;

            // L·∫•y doanh thu t·ª´ng h·∫°ng m·ª•c
            const revenueAccommodation = parseFloat(document.getElementById('revenueAccommodation').value) || 0;
            const revenueTransport = parseFloat(document.getElementById('revenueTransport').value) || 0;
            const revenueFoodBeverage = parseFloat(document.getElementById('revenueFoodBeverage').value) || 0;
            const revenueShopping = parseFloat(document.getElementById('revenueShopping').value) || 0;
            const revenueTicket = parseFloat(document.getElementById('revenueTicket').value) || 0;
            const revenueOther = parseFloat(document.getElementById('revenueOther').value) || 0;

            // T√≠nh t·ªïng doanh thu
            const totalRevenue = revenueAccommodation + revenueTransport + revenueFoodBeverage + 
                                 revenueShopping + revenueTicket + revenueOther;

            // L·∫•y t·ª∑ l·ªá chi tr·∫£
            let feeRate = parseFloat(document.getElementById('feeRate').value) || 1;
            if (feeRate < 1) {
                feeRate = 1;
                document.getElementById('feeRate').value = 1;
                alert('‚ö†Ô∏è T·ª∑ l·ªá chi tr·∫£ t·ªëi thi·ªÉu l√† 1% theo quy ƒë·ªãnh!');
            }

            // T√≠nh ph√≠ chi tr·∫£ DVHST
            const ecosystemFee = totalRevenue * (feeRate / 100);

            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            const quarterNames = {
                'Q1': 'Qu√Ω I',
                'Q2': 'Qu√Ω II', 
                'Q3': 'Qu√Ω III',
                'Q4': 'Qu√Ω IV'
            };

            document.getElementById('resultPeriod').textContent = 
                `${businessName} - ${quarterNames[quarter]} nƒÉm ${year}`;
            
            document.getElementById('resultVisitors').textContent = formatNumber(totalVisitors);
            document.getElementById('resultGuestDays').textContent = formatNumber(Math.round(totalGuestDays));
            document.getElementById('resultTotalRevenue').textContent = formatCurrency(totalRevenue);
            document.getElementById('resultRate').textContent = feeRate + '%';
            document.getElementById('resultFee').textContent = formatCurrency(ecosystemFee);

            // Chi ti·∫øt breakdown
            document.getElementById('breakAccommodation').textContent = formatCurrency(revenueAccommodation);
            document.getElementById('breakTransport').textContent = formatCurrency(revenueTransport);
            document.getElementById('breakFood').textContent = formatCurrency(revenueFoodBeverage);
            document.getElementById('breakShopping').textContent = formatCurrency(revenueShopping);
            document.getElementById('breakTicket').textContent = formatCurrency(revenueTicket);
            document.getElementById('breakOther').textContent = formatCurrency(revenueOther);

            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            document.getElementById('resultContainer').style.display = 'block';
            document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });
        }

        // Reset form
        function resetForm() {
            document.querySelectorAll('input[type="number"]').forEach(input => {
                if (input.id !== 'feeRate') {
                    input.value = '';
                }
            });
            document.getElementById('businessName').value = '';
            document.getElementById('feeRate').value = '1';
            document.getElementById('resultContainer').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // In k·∫øt qu·∫£
        function printResult() {
            window.print();
        }

        // Xu·∫•t PDF (ƒë∆°n gi·∫£n)
        function exportPDF() {
            alert('üí° ƒê·ªÉ xu·∫•t PDF, vui l√≤ng s·ª≠ d·ª•ng ch·ª©c nƒÉng "In" (Ctrl+P) v√† ch·ªçn "L∆∞u d∆∞·ªõi d·∫°ng PDF"');
            window.print();
        }

        // Validate input - ch·ªâ cho ph√©p s·ªë d∆∞∆°ng
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', function() {
                if (this.value < 0) {
                    this.value = 0;
                }
            });
        });
    </script>
</body>
</html>
